<!doctype html>
<html webc:keep
      :lang="lang"
>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title @raw="title" :@title="title" webc:is="document-title"></title>
    <link rel="stylesheet" href="./_general/modern-normalize.css" />
    <link rel="stylesheet" href="./_general/variables.css" />
    <style webc:keep @raw="getCss(page.url)"></style>
  </head>

  <body>
    <div class="docs-layout">
      <div class="docs-layout__top">
        <slot name="header">
          <header webc:is="top-bar">
            <button
              slot="button"
              class="docs-layout__menu-btn"
            >Menu</button>

            <a
              :href="`/${lang}`"
              @text="siteTitle"
              slot="brand"
              class="docs-layout__site-title"
            ></a>

            <!-- Todo breadcrumbs -->
            <a
              :href="`/${lang}`"
              @text="'Documentation'"
              slot="breadcrumb"
              class="docs-layout__site-section"
            ><!-- Todo i18n --></a>
          </header>
        </slot>
      </div>


      <main class="docs-layout__center">
        <div class="docs-layout__center-wrapper | grid-area--page-header">
          <!-- En-tête -->
          <page-header
            :@title="title"
          ></page-header>
        </div>

        <div class="docs-layout__center-wrapper | grid-area--page-sidebar">
          <nav class="docs-layout__center-sidebar">
            <!-- TOC? -->
          </nav>
        </div>

        <div class="docs-layout__center-wrapper | grid-area--page-content">
        <!-- default slot -- content -->
          <div
            class="article-principal__contenu"
            :@content="content"
            webc:is="prose-block"
          >
            <slot></slot>
          </div>
        </div>
      </main>

      <div
        class="docs-layout__navigation"
        webc:if="useSideMenu"
      >
        <!-- 1 seul élément enfant (voir CSS) -->
          <main-navigation
            :@menu="menu"
          >
          </main-navigation>
        </slot>
      </div>
    </div>

    <slot name="footer">
      <footer></footer>
    </slot>
  </body>
</html>

<style webc:scoped>
  /* Avec `webc:scoped`, les styles sont propres à ce composant */
  .docs-layout {
    --side-menu-width: 18rem;
    --content-sidebar-width: 14rem;
    --article-max-width: 42rem;
    --center-padding: .75rem;
    --menu-toggle-display: inline-flex;

    /* couleurs */
    color: var(--couleur-police);
    background-color: var(--couleur-fond);
  }
  .docs-layout__center {
    /* Signaler graphiquement la fin du contenu */
    padding-bottom: 3rem;
  }

  @media (min-width: 48rem) {
    .docs-layout {
      --center-padding: 1.25rem;
      --menu-toggle-display: none;

      display: grid;
      grid-template-areas:
        "top  top"
        "nav  center"
      ;
      /* grid-template-columns:
         - barre latérale
         - `1fr` pour occuper l’espace restant
      */
      grid-template-columns: var(--side-menu-width) 1fr;
      /* grid-template-row:
         - `auto` pour éviter que la 1re rangée prenne de l’expansion
         - `1fr` pour occuper l’espace restant
      */
      grid-template-rows: auto 1fr;
      height: 100vh;
    }

    .docs-layout__navigation {
      grid-column-start: nav;
      grid-row-start: 2;
      height: 100%;
      border-inline-end: 1px solid var(--couleur-fond-accent);
    }

    .docs-layout__center {
      grid-column-start: center;
      grid-row-start: 2;
      height: 100%;
      overflow: auto;
    }
  }

  @media (min-width: 60rem) {
    .docs-layout__center {
      display: grid;
      grid-template-columns: calc(100% - var(--content-sidebar-width)) 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas:
      "center-header    center-sidebar"
      "center-content   center-sidebar"
    ;

      /* Pour un éventuel élément sticky */
      position: relative;
    }

    .grid-area--page-header {
      grid-area: center-header;
    }

    .grid-area--page-content {
      grid-area: center-content;
    }

    .grid-area--page-sidebar {
      grid-area: center-sidebar;

      border-left: 1px solid var(--couleur-fond-accent);

      /* Éviter que l’élément prenne la pleine hauteur */
      align-self: start;

      /* Sticky */
      /*position: sticky;*/
      /*top: 1rem;*/
    }
  }

  .docs-layout__top {
    grid-area: top;
    border-bottom: 1px solid var(--couleur-fond-accent);
  }

  .docs-layout__navigation {
    display: grid;
    align-items: stretch;
    justify-content: stretch;
    overflow: auto;

    background-color: var(--couleur-fond-2);
  }

  .docs-layout__site-title {
    --title-background-color: var(--azur-aoste);
    --title-text-color: #fff;
    --title-triangle-size: .85rem;

    /* Positionnement du titre dans la barre */
    /*margin: .35rem .75rem;*/
    padding: .35rem .75rem;
    position: relative;
    background-color: var(--title-background-color);
    color: var(--title-text-color);
    margin-inline-end: var(--title-triangle-size);

    /* Typographie */
    font-weight: bold;
  }

  .docs-layout__site-breadcrumb {
    padding: .35rem .75rem;
  }

  .docs-layout__menu-btn {
    display: var(--menu-toggle-display);

    /* Match items */
    padding: .35rem .75rem;

    /* Reset btn styles*/
    border: none;
    appearance: none;
    cursor: pointer;

    /* Match main title element? */
    background-color: var(--azur-aoste);
    color: #fff;
  }

  /* Pour compléter la en forme angulaire */
  .docs-layout__site-title::after {
    content: '';
    position: absolute;
    background-color: var(--title-background-color);
    height: 100%;
    width: var(--title-triangle-size);
    top: 0;
    left: 100%;
    /* Triangle clip-path */
    clip-path: polygon(0% 0%,
                       50% 50%,
                       0% 100%);
  }

  .docs-layout__center-wrapper {
    margin: var(--center-padding);
  }

  .docs-layout__center-sidebar {
    align-self: flex-start;

    /* sticky sur défilement */
    position: sticky;
    top: 0;
    right: 0;
  }
</style>
